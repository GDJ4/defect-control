-- Дополнительные пользователи для демо-данных
INSERT INTO users (id, email, password_hash, full_name, role)
VALUES
  ('44444444-4444-4444-4444-444444444444', 'qa@systemacontrola.ru', '$2a$12$JH6d6qxGn8pYtBXexdFvcuoS4x2ma/pk3jfbQ3VIAtF5NCz7L3A2K', 'Савельев Никита', 'engineer'),
  ('55555555-5555-5555-5555-555555555555', 'safety@systemacontrola.ru', '$2a$12$JH6d6qxGn8pYtBXexdFvcuoS4x2ma/pk3jfbQ3VIAtF5NCz7L3A2K', 'Громова Светлана', 'observer'),
  ('66666666-6666-6666-6666-666666666666', 'chief@systemacontrola.ru', '$2a$12$JH6d6qxGn8pYtBXexdFvcuoS4x2ma/pk3jfbQ3VIAtF5NCz7L3A2K', 'Фёдоров Максим', 'manager')
ON CONFLICT (id) DO NOTHING;

-- Новые проекты
INSERT INTO projects (id, name, stage, description, start_date, end_date, created_by)
VALUES
  ('aaaa1111-2222-3333-4444-555566667777', 'Деловой центр «Сколково»', 'Отделка интерьеров', 'Комплекс с лабораторными помещениями и open-space офисами', '2025-03-01', '2026-02-15', '66666666-6666-6666-6666-666666666666'),
  ('bbbb1111-2222-3333-4444-555566667777', 'Агрокомплекс «Атлант»', 'Инженерные сети', 'Группа теплиц и складов хранения, два блока инженерных систем', '2024-10-05', '2025-11-30', '66666666-6666-6666-6666-666666666666'),
  ('cccc1111-2222-3333-4444-555566667777', 'Транспортный хаб «Южный»', 'Пусконаладка', 'Многоуровневый пересадочный узел с паркингом на 1200 машин', '2024-09-12', '2025-08-01', '66666666-6666-6666-6666-666666666666')
ON CONFLICT (id) DO NOTHING;

INSERT INTO project_members (project_id, user_id, role) VALUES
  ('aaaa1111-2222-3333-4444-555566667777', '66666666-6666-6666-6666-666666666666', 'manager'),
  ('aaaa1111-2222-3333-4444-555566667777', '22222222-2222-2222-2222-222222222222', 'engineer'),
  ('aaaa1111-2222-3333-4444-555566667777', '44444444-4444-4444-4444-444444444444', 'engineer'),
  ('bbbb1111-2222-3333-4444-555566667777', '66666666-6666-6666-6666-666666666666', 'manager'),
  ('bbbb1111-2222-3333-4444-555566667777', '44444444-4444-4444-4444-444444444444', 'engineer'),
  ('bbbb1111-2222-3333-4444-555566667777', '55555555-5555-5555-5555-555555555555', 'observer'),
  ('cccc1111-2222-3333-4444-555566667777', '66666666-6666-6666-6666-666666666666', 'manager'),
  ('cccc1111-2222-3333-4444-555566667777', '22222222-2222-2222-2222-222222222222', 'engineer'),
  ('cccc1111-2222-3333-4444-555566667777', '55555555-5555-5555-5555-555555555555', 'observer')
ON CONFLICT DO NOTHING;

-- Дополнительные дефекты
INSERT INTO defects (id, project_id, title, description, priority, severity, status, assignee_id, due_date, created_by, updated_by)
VALUES
  (
    'aaaa0000-1111-2222-3333-444455556666',
    'aaaa1111-2222-3333-4444-555566667777',
    'Шум в вентиляционных шахтах',
    'На 12-13 этажах слышен сильный свист и вибрации при работе системы вентиляции.',
    'MEDIUM',
    'MAJOR',
    'IN_PROGRESS',
    '44444444-4444-4444-4444-444444444444',
    '2025-04-18',
    '66666666-6666-6666-6666-666666666666',
    '44444444-4444-4444-4444-444444444444'
  ),
  (
    'bbbb0000-1111-2222-3333-444455556666',
    'bbbb1111-2222-3333-4444-555566667777',
    'Отставание температуры в теплицах',
    'В секции №4 температура на 4°C ниже нормы, подозрение на неисправный узел подмеса.',
    'HIGH',
    'MAJOR',
    'IN_REVIEW',
    '22222222-2222-2222-2222-222222222222',
    '2025-03-05',
    '66666666-6666-6666-6666-666666666666',
    '22222222-2222-2222-2222-222222222222'
  ),
  (
    'cccc0000-1111-2222-3333-444455556666',
    'cccc1111-2222-3333-4444-555566667777',
    'Сбой системы пожаротушения в паркинге',
    'Контроллер шлюза не принимает сигналы датчиков, система переходит в аварийный режим.',
    'CRITICAL',
    'CRITICAL',
    'IN_PROGRESS',
    '44444444-4444-4444-4444-444444444444',
    '2025-02-27',
    '66666666-6666-6666-6666-666666666666',
    '44444444-4444-4444-4444-444444444444'
  ),
  (
    'dddd0000-1111-2222-3333-444455556666',
    'aaaa1111-2222-3333-4444-555566667777',
    'Протечки в серверной группе В',
    'После испытаний системы пожаротушения обнаружены влажные следы вдоль шины питания.',
    'HIGH',
    'MAJOR',
    'NEW',
    '22222222-2222-2222-2222-222222222222',
    '2025-04-02',
    '66666666-6666-6666-6666-666666666666',
    NULL
  ),
  (
    'eeee0000-1111-2222-3333-444455556666',
    'bbbb1111-2222-3333-4444-555566667777',
    'Ошибка калибровки датчиков влажности',
    'Данные на панели диспетчера скачут, часть датчиков выдаёт 0% влажности.',
    'LOW',
    'MINOR',
    'IN_PROGRESS',
    '44444444-4444-4444-4444-444444444444',
    '2025-03-19',
    '66666666-6666-6666-6666-666666666666',
    '44444444-4444-4444-4444-444444444444'
  ),
  (
    'ffff0000-1111-2222-3333-444455556666',
    'cccc1111-2222-3333-4444-555566667777',
    'Зависание табло навигации',
    'LED-панели на уровне -1 периодически перезагружаются, сообщение об ошибке GPU.',
    'MEDIUM',
    'MINOR',
    'IN_REVIEW',
    '44444444-4444-4444-4444-444444444444',
    '2025-03-28',
    '66666666-6666-6666-6666-666666666666',
    '22222222-2222-2222-2222-222222222222'
  )
ON CONFLICT (id) DO NOTHING;

-- Комментарии по новым дефектам
INSERT INTO defect_comments (id, defect_id, author_id, body)
VALUES
  ('aaaa9999-aaaa-bbbb-cccc-ddddeeeeff00', 'aaaa0000-1111-2222-3333-444455556666', '44444444-4444-4444-4444-444444444444', 'Замерили скорость воздуха, превышает паспортную на 20%. Ждём балансировочную заслонку.'),
  ('bbbb9999-aaaa-bbbb-cccc-ddddeeeeff00', 'bbbb0000-1111-2222-3333-444455556666', '22222222-2222-2222-2222-222222222222', 'Переключили контур на резервный теплообменник, температура выходит на норму.'),
  ('cccc9999-aaaa-bbbb-cccc-ddddeeeeff00', 'cccc0000-1111-2222-3333-444455556666', '44444444-4444-4444-4444-444444444444', 'Ожидаем поставку контроллера, ETA 5 дней.'),
  ('dddd9999-aaaa-bbbb-cccc-ddddeeeeff00', 'dddd0000-1111-2222-3333-444455556666', '22222222-2222-2222-2222-222222222222', 'Добавили временную герметизацию, мониторим повторно после высыхания.'),
  ('eeee9999-aaaa-bbbb-cccc-ddddeeeeff00', 'eeee0000-1111-2222-3333-444455556666', '44444444-4444-4444-4444-444444444444', 'Подготовлен реестр датчиков, которые нужно перекалибровать.'),
  ('ffff9999-aaaa-bbbb-cccc-ddddeeeeff00', 'ffff0000-1111-2222-3333-444455556666', '55555555-5555-5555-5555-555555555555', 'Оповещение отправлено подрядчику поставщика табло.')
ON CONFLICT (id) DO NOTHING;

-- История изменений по части дефектов
INSERT INTO defect_history (id, defect_id, actor_id, field, old_value, new_value)
VALUES
  ('aaaa0000-b111-c222-d333-eeeeffff6601', 'aaaa0000-1111-2222-3333-444455556666', '44444444-4444-4444-4444-444444444444', 'status', 'NEW', 'IN_PROGRESS'),
  ('aaaa0000-b111-c222-d333-eeeeffff6602', 'bbbb0000-1111-2222-3333-444455556666', '22222222-2222-2222-2222-222222222222', 'status', 'IN_PROGRESS', 'IN_REVIEW'),
  ('aaaa0000-b111-c222-d333-eeeeffff6603', 'cccc0000-1111-2222-3333-444455556666', '44444444-4444-4444-4444-444444444444', 'status', 'NEW', 'IN_PROGRESS'),
  ('aaaa0000-b111-c222-d333-eeeeffff6604', 'ffff0000-1111-2222-3333-444455556666', '22222222-2222-2222-2222-222222222222', 'status', 'IN_PROGRESS', 'IN_REVIEW')
ON CONFLICT (id) DO NOTHING;
